# TransmissionRouter

The **TransmissionRouter** is the central component of the Transmission library that manages the flow of transmissions between transformers. It acts as a message broker, ensuring that transmissions are delivered to the appropriate transformers.

## Responsibilities

The TransmissionRouter has the following responsibilities:

- Process incoming **Signals** and distribute them to all registered Transformers
- Broadcast **Effects** generated by Transformers to all other Transformers
- Collect **Data** produced by Transformers and make it available via streams
- Manage the lifecycle of registered Transformers
- Facilitate communication between Transformers via Contracts

## Creating a TransmissionRouter

To create a TransmissionRouter, use the TransmissionRouterBuilder:

```kotlin
val router = TransmissionRouterBuilder.build {
    // Add a set of transformers
    addTransformerSet(setOf(
        transformer1,
        transformer2,
        transformer3
    ))
    
    // Optionally specify a dispatcher
    addDispatcher(Dispatchers.Default)
}
```

## Processing Transmissions

Once a router is created, you can process signals and effects:

```kotlin
// Process a signal
router.process(MySignal)

// Process an effect
router.process(MyEffect)
```

## Transformer Registration

Transformers can be added to the router in two ways:

1. Directly, using `addTransformerSet()`
2. Via a TransformerSetLoader, using `addLoader()`

## Lazy Initialization

By default, the router initializes automatically. This behavior can be overridden:

```kotlin
val router = TransmissionRouterBuilder.build {
    overrideInitialization()
}

// Later, initialize with a loader
router.initialize(myLoader)
```

## Data and Effect Streams

The router provides access to the data and effect streams:

```kotlin
// Collect data from transformers
router.dataStream.collect { data ->
    // Process the data
}

// Collect effects from transformers
router.effectStream.collect { effect ->
    // Process the effect
}
```

## Request Handling

The router provides a request helper to facilitate communication between Transformers:

```kotlin
// Get data from a DataHolder
val data = router.requestHelper.getData(myContract)

// Execute a computation
val result = router.requestHelper.compute(myComputationContract)

// Execute an action
router.requestHelper.execute(myExecutionContract)
```